cluster 모듈은 싱글 스레드인 노드가 CPU 코어를 모두 사용해 줄 수 있게 해주는 모듈
요청이 많이 들어올때 병렬로 실행된 서버의 개수만큼 요청이 분산되게 할 수 있다.
노드는 보통 코어 하나만 사용한다. 하지만 cluster 모듈을 설정하면 코어 하나당 노드 프로세스 하나가 돌아가게 할 수 있다.

하지만 세션을 공유하지 못한다.
이는 Redis 등의 서버를 도입하여 해결할 수 있다 .

클러스터에는 마스터 프로세스와 워커 프로세스가 있다.
마스터 프로세스는 CPU 개수만큼 워커 프로세스를 만들고, 8085 번 포트에서 대기한다.
요청이 들어오면 만들어진 워커 프로세스에 요청을 분배한다.

워커프로세스가 실질적인 일을 하는 프로세스이다.

워커 종료(exit) 시 새로운 워커를 생성(fork) 할 경우 오류 자체 원인을 찾을 수 없기에
좋지 않은 생각이지만 예기치 못한 오류로 서버가 종료되는 현상을 방지할 수 있어
클러스터링을 적용해두는것이 좋다.

실무에서는 pm2 등의 모듈로 cluster 기능을 사용한다.
